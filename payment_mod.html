<head>
	
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CPC Training Classes</title>
	
	
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->

    <link href="./css/style.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	
	
	
	
	 <!-- Bootstrap CSS -->
    <!-- <link rel="stylesheet" href="css/bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="../style.css">
    <link rel="stylesheet" type="text/css" href="../css/slick.css">
    <link rel="stylesheet" type="text/css" href="../css/font-awesome.css">
    <!-- font awesome icon -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Ionicons -->
    <link rel="stylesheet" href="../css/ionicons.min.css" type="text/css">
    <link rel="stylesheet" href="../assets/css/plugins.css">
    <!-- app css -->
    <link rel="stylesheet" href="../assets/css/app.css">
    <link rel="icon" type="image/x-icon" href="image/logo/favicon.ico">
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    
	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z9SEYGE44E"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z9SEYGE44E');
</script>
	
</head>

<!------ Include the above in your HEAD tag ---------->


<style>
body { margin-top:20px; }
.panel-title {display: inline;font-weight: bold;}
.checkbox.pull-right { margin: 0; }
.pl-ziro { padding-left: 0px; }

.input-icon {
  position: relative;
}

.input-icon > i {
  position: absolute;
  display: block;
  transform: translate(0, -50%);
  top: 50%;
  pointer-events: none;
  width: 25px;
  text-align: center;
	font-style: normal;
	color: black;

}

.input-icon > input {
  padding-left: 25px;
	padding-right: 0;
}

.input-icon-right > i {
  right: 0;
}

.input-icon-right > input {
  padding-left: 0;
  padding-right: 25px;
  text-align: right;
}
<!-- .input-icon > i { -->
    <!-- position: absolute; -->
    <!-- display: block; -->
    <!-- transform: translate(0, -50%); -->
    <!-- top: 31% ; -->
    <!-- pointer-events: none; -->
    <!-- width: 25px; -->
    <!-- text-align: center; -->
    <!-- font-style: normal; -->
    <!-- color: black; -->
<!-- } -->

.currencyinput {
 padding: 4px 2px 1.9px 2px;
    margin-left: -12px;
    margin-top: 0px;
    position: absolute;
    color: black;
    font-weight: bold;
    font-size: 20px;
    background-color: white;
    /* border: 1px solid gray;
}
}
.currencyinput input {
    border: 0;
    padding-left: 3px;
}
</style>
	<div id="fb-root"></div>
	<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0" nonce="YidlLulS">
	</script>
 	<!-- header start -->
 
    <header class="header-area" style="background-color:white">
      <!-- header top start -->
      <div class="main-header d-none d-lg-block">

        <!-- header middel start -->
        <div class="header-middle-area sticky">
          <div class="container">
            <div class="row">
              	<div class="col-md-2">
                	<div class="logo">
                 	 <a href="https://oldme.com//index.html"><img src="../image/logo/logo.png"></a>
               	 	</div>
             	 </div>
              	 <div class="col-md-1">
                
              	 </div>
              	 <div class="col-md-6">
                		<div class="main-menu-area">
                  			<div class="main-menu">
                    			<div class="destop-menu">
                      				<ul>
                        				<li class="active">
                          					<a href="https://oldmecpc.com">Home</a>
                        				</li>
                        				<li>
                          					<a href="https://oldmecpc.com/classes.html">Classes</a>
                        				</li>
                        				<li class="static">
                          					<a href="https://calendly.com/ehearns/zoom-meeting?back=1&month=2021-12" target="_blank">Consultation</a>
                        				</li>
										<li class="static">
                          					<a href="https://oldmecpc.com/employer.html" target="_blank">Employer</a>
                        				</li>
                        				<li>
                          					<a href="https://www.linkedin.com/in/eddiehearns/" target="_blank">About us</a>
                        				</li>
                      				</ul>
                    			</div>
                  			</div>
                		</div>
              	</div>
			    <div class="col-md-1">
                </div>
			    <div class="col-md-2">
                	<div class="logo">
                  		<a href="https://oldme.com//index.html"><img src="../image/logo/aapc.jpg"></a>
                	</div>
              	</div>
<section>
	
        <div class="bg-vector">
            <div class="cpc-header">
                <div class="title">
                 </div>
            </div>
            <div class="container" >
                <div class="cpc-text">
					<h1> Welcome to our Payment Module! </h1>
					<h2 align="left"> Our website doesn't store any credit card information.  Our Bank of America Merchant Services encrpyts and secure any payment data required to complete the transaction(s).</h2>
  				          <br>
               		<p align="left"> 
                       Please complete the payment information below.  If using paypal, please use (347) 964-3866. 
                    </p>
					<br>

			</div>
		</div>
	</div>
    </section>

<div class="container">
<br>
    <div class="row">
	<div class="col-md-4"> </div>
        <div class="col-md-4">
		 <form role="form" method="post" id="submitform">
		<div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Payment Details
                    </h3>
                    <!-- <div class="checkbox pull-right"> -->
                        <!-- <label> -->
                            <!-- <input type="checkbox" /> -->
                            <!-- Remember -->
                        <!-- </label> -->
                    <!-- </div> -->
                </div>
				
                <div class="panel-body">
                   
                    
                    <div class="row">
                       <div class="col-xs-6 col-md-6">
                            <div class="form-group">
                                <label for="firstname">
                                    First Name</label>
                                <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Fist Name" required />
                            </div>
                        </div>
                        <div class="col-xs-6 col-md-6">
                            <div class="form-group">
                                <label for="lastname">
                                    Last Name</label>
                                <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Last Name" required />
                            </div>
                        </div>
                    </div>
                   
               
           
                <!-- <div class="panel-heading"> -->
                    <!-- <h3 class="panel-title"> -->
                        <!-- Payment Details -->
                    <!-- </h3> -->
                    <!-- <div class="checkbox pull-right"> -->
                        <!-- <label> -->
                            <!-- <input type="checkbox" /> -->
                            <!-- Remember -->
                        <!-- </label> -->
                    <!-- </div> -->
                <!-- </div> -->
             
                    
                    <div class="form-group">
                        <label for="cardNumber">
                            CARD NUMBER</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="cardnumber" name="cardnumber" maxlength="16" pattern="\d{16}" placeholder="Valid Card Number"
                                required autofocus />
                            <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-7 col-md-7">
                            <div class="form-group">
                                <label for="expityMonth">
                                    EXPIRY DATE</label>
                                <div class="col-xs-6 col-lg-6 pl-ziro">
                                    <input type="number" class="form-control" id="expirymonth" name="expirymonth" placeholder="MM" maxlength="2" pattern="\d{2}"required />
                                </div>
                                <div class="col-xs-6 col-lg-6 pl-ziro">
                                    <input type="number" class="form-control" id="expiryyear" name="expiryyear" placeholder="YYYY" maxlength="4" pattern="\d{4}" required /></div>
                            </div>
                        </div>
                        <div class="col-xs-5 col-md-5 pull-right">
                            <div class="form-group">
                                <label for="cvCode">
                                    CVV CODE</label>
                                <input type="password" class="form-control" id="cvvcode" name="cvvcode" placeholder="CVV" maxlength="3" pattern="\d{3}" required />
                            </div>
                        </div>
						
					
                    </div>
					
					 
                    
                </div>
				          
            </div>
			<div class="row">
                        <div class="col-xs-12 col-md-12">
                            <div class="form-group">
			  <ul class="nav nav-pills nav-stacked" >
                <li class="active" ><a style="background-color: #019ca0;">Enter Course Amount <div class="form-group">
                
<span class="currencyinput">$</span><input type="number" class="form-control"  id="courseprice" name="courseprice">

				<!-- <div class="input-icon"> -->
 <!-- <i>$</i>                   -->
				  <!-- <input type="number" id="courseprice" name="courseprice" class="form-control" placeholder="0.00" required> -->
                  
                 <!-- </div> -->
               </div> </a>
                </li>
            </ul>
			</div>
			</div>
			</div>
			

				
            <br/>
            <button type="submit" id="submit" href="" class="btn btn-success btn-lg btn-block" style="background-color: #019ca0;" role="button">Pay</button>
			
			<div class="" id="paypal_button"
                                        style="margin-top:10px;">
                                    </div>
			
			<br>
			<lable> <strong>Note: We are not storing any credit card information in our datababase.</strong> </lable>
        <div style="text-align:center; color:red; font-size:18px;" id="respones"></div>
		<div class="col-md-4"> </div>
	</form>
</div>
</div>
</div>
<!-- <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script> -->
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
	<script src="https://www.paypalobjects.com/api/checkout.js"></script>
	
	<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"  -->
        <!-- integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"  -->
        <!-- crossorigin="anonymous"> -->
<!-- </script> -->

<script src="./css/jquery.uriget.min.js"></script>
	
<script type="text/javascript">
var U_Id= "";
var Course_Amount="";
var Client_ID= "" ;
$( document ).ready(function() {

  var User_Id = $.uriGet('Value');
<!-- var Pay_Amount = $.uriGet('Amount'); -->


 U_Id = User_Id;
 <!-- Course_Amount=Pay_Amount; -->
 
  <!-- $("#payamount").text("$"+ Pay_Amount); -->
  
 
});
debugger;
  $('#submitform').validate({
  
  
        rules: {
                    firstname: {
                        required: true
                    },
                    lastname: {

                        required: true
                    },
                    cardnumber: {
                        required: true,
                    },
                    expirymonth : {
                        
                         required: true,
                      
                    },
                   expiryyear: {

                        required: true
                    },
					  cvvcode: {

                        required: true
                    },
					  courseprice: {

                        required: true
						
                    },
                   
                },
               

submitHandler: function(form) {
var form_data = new FormData(document.getElementById("submitform"));
<!-- $("#submit").attr("disabled",true); -->

debugger;
var cardnumber= $("#cardnumber").val();
var expirymonth= $("#expirymonth").val();
var expiryyear= $("#expiryyear").val();
var cvvcode= $("#cvvcode").val();
var courseprice= $("#courseprice").val();
var expirationDate= expiryyear +"-"+ expirymonth;
Course_Amount=courseprice;
var _data = {
    "createTransactionRequest": {
        "merchantAuthentication": {
            "name": "93A3ka48sYw",
            "transactionKey": "47L9CcAj66GN64ru"
        },
        "refId": "123456",
        "transactionRequest": {
            "transactionType": "authCaptureTransaction",
            "amount": courseprice,
            "payment": {
                "creditCard": {
                    "cardNumber": cardnumber,
                    "expirationDate": expirationDate,
                    "cardCode": cvvcode
                }
            },
            
        }
    }
}

var transid = '';
$.ajax({
    type: 'POST',
    url: 'https://apitest.authorize.net/xml/v1/request.api',
    data: JSON.stringify(_data),
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function(data){ 
	debugger;
	$("#respones").empty();
	if(data.messages.resultCode=='Ok'){
	transid= data.transactionResponse.transId;	  
	
	 }
	 else
	 {
	  $("#respones").append('The transaction was unsuccessful.');
	 }
},
complete: function(){
debugger;
		  $.ajax({
          type: 'get',
      <!-- url: 'http://localhost:1502/api/FamilyMonitoring/CPCCoursePayment', -->
		url: 'https://apiyfsn.azurewebsites.net/api/FamilyMonitoring/CPCCoursePayment',
		
          data: { 'PayId': transid , 'UserId' : U_Id , 'Amount' : Course_Amount },
		  contentType: "application/json; charset=utf-8",
          cache: false,
		  async: false,
          <!-- contentType: false, -->
          <!-- processData: false, -->
		  crossDomain : true,
          success: function(data){
		  debugger;
          $("#respones").empty();
          
          $("#submit").attr("disabled",false);
          if(data=='success'){
		
            $("#submitform")[0].reset();
            $("#respones").append('This transaction has been approved. Please check your email.');
			}  
          },
          });
          
}     
});

         
          }
          });
		  
		 
		 function myFunction(p1) {
  return p1 * p2;   // The function returns the product of p1 and p2
}

// PayPAL

 $.ajax({
          type: 'get',
      
		url: 'https://apiyfsn.azurewebsites.net/api/FamilyMonitoring/PaymentKey',
	
		  contentType: "application/json; charset=utf-8",
          cache: false,
		  async: false,
          <!-- contentType: false, -->
          <!-- processData: false, -->
		  crossDomain : true,
          success: function(data){
		  debugger;
         
          if(data !=''){
		    Client_ID = data;
         
			}
          },
          });
		  
var Pay_id = '';
var course_price= $("#courseprice").val();

Course_Amount=course_price;
paypal.Button.render({
client: {                 production : Client_ID ,
                         //sandbox: 'AY-pidy_YHh3S2GGEwfZWFTXsxLS1FdNIfWuNu_ZtYgWIt_rqWTjZnBi2X8ktIOtuJhANioojtMDHjBC',
                         //production: 'AdZc_IBsp9aHEMeXPnuODYiAoRijJoGxI2QABVruarZItttVuFAxPgtxaHzYsZv-_Oy8efiNkgIzSZLI'  // Live oldme 
    //                     production: this.paypalKey
                     },
env: 'production',
style: {
                        size: 'large',
                        tagline: false,
                        label: 'pay',
                        shape: 'rect',
                        color: 'white'
                    },
                    commit: true,
payment: function(data, actions) {
return actions.payment.create({
                           payment: {
                               transactions: [
                                   {
                                       amount: {
                                           total: 1,//parseInt (Course_Amount),
                                           currency: 'USD'
                                       }
                                   }
                               ]
                           }
                       });

},

onAuthorize: function(data, actions) {

                          
                                 return actions.payment.execute()
                                 
                                    .then(() => {
								        debugger;
										return actions.payment.get().then(function(data) { 
										
										Pay_id = data.id; 
		
										}),
										savepaypalidindb(Pay_id);
										
                                        $("#respones").append('This transaction has been approved. Please check your email.');
                                    });
                           
                     },

                     onCancel: () => {
                    $("#respones").append('The transaction was unsuccessful.');
                     }
                 }, '#paypal_button');
				 
				 function savepaypalidindb(Pay_id){
				 debugger;
				  $.ajax({
          type: 'get',
      
		url: 'https://apiyfsn.azurewebsites.net/api/FamilyMonitoring/CPCCoursePayment',
		
          data: { 'PayId': Pay_id , 'UserId' : U_Id , 'Amount' : Course_Amount},
		  contentType: "application/json; charset=utf-8",
          cache: false,
		  async: false,
          <!-- contentType: false, -->
          <!-- processData: false, -->
		  crossDomain : true,
          success: function(data){
		  debugger;
          $("#respones").empty();
          
          $("#submit").attr("disabled",false);
          if(data=='success'){
		
            $("#submitform")[0].reset();
            $("#respones").append('This transaction has been approved. Please check your email.');
			}  
          },
          });
	
				 
				 }


 
          
</script>
	 